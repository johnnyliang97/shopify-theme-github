/*
 * ------------------------------------------------------------
 * IMPORTANT: The contents of this file are auto-generated.
 *
 * This file may be updated by the Shopify admin theme editor
 * or related systems. Please exercise caution as any changes
 * made to this file may be overwritten.
 * ------------------------------------------------------------
 */
{
  "parent": "product.json",
  "context": {
    "market": "au"
  },
  "sections": {
    "main": {
      "settings": {},
      "blocks": {
        "custom_liquid_6QFpXe": {
          "settings": {
            "custom_liquid": "{%- comment -%}\n  AFTERPAY MINI-BANNER â€” Lestyle\n  Shows: \"4 payments of {current price / 4} with [Afterpay logo] \n          Learn more\"\n  - Displays price without currency code (\"A$\")\n{%- endcomment -%}\n\n{%- assign _variant = product.selected_or_first_available_variant -%}\n{%- assign _per_payment = _variant.price | times: 0.25 -%}\n\n<div id=\"afterpay-banner-{{ section.id | default: product.id }}\" class=\"ap-mini-banner\" role=\"note\" aria-label=\"Afterpay instalments\">\n  <span class=\"ap-text\">\n    4 payments of\n    <strong class=\"ap-amount\">\n      {{ _per_payment | money | replace: \"A$\", \"$\" }}\n    </strong>\n    with\n  </span>\n\n  <a class=\"ap-logo\" href=\"https://www.lestyle.com.au/blogs/lestyle-spotlight/buy-now-pay-later-with-afterpay/\" target=\"_blank\" rel=\"noopener\" aria-label=\"About Afterpay\">\n    <img src=\"https://cdn.shopify.com/s/files/1/0758/6467/0467/files/afterpay_logo.png?v=1755220716\" alt=\"afterpay\" loading=\"lazy\">\n  </a>\n\n  <div class=\"ap-learn-wrapper\">\n    <a class=\"ap-learn\" href=\"https://www.lestyle.com.au/blogs/lestyle-spotlight/buy-now-pay-later-with-afterpay/\" target=\"_blank\" rel=\"noopener\">Learn more</a>\n  </div>\n\n  <script type=\"application/json\" class=\"ap-product-json\">{{ product | json }}</script>\n</div>\n\n<style>\n  .ap-mini-banner{\n    display:flex; flex-wrap:wrap; align-items:center; gap:.5rem;\n    font: 400 14px/1.4 -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Arial, sans-serif;\n    color:#111;\n  }\n  .ap-mini-banner .ap-text{white-space:nowrap;}\n  .ap-mini-banner .ap-amount{font-weight:700;}\n  .ap-mini-banner .ap-logo img{\n    height:26px; /* Bigger logo */\n    width:auto;\n    display:block;\n  }\n  .ap-mini-banner .ap-learn-wrapper{\n    flex-basis:100%;\n  }\n  .ap-mini-banner .ap-learn{\n    text-decoration:underline;\n    color:#111;\n    font-size:14px;\n  }\n</style>\n\n<script>\n(function() {\n  const container = document.getElementById('afterpay-banner-{{ section.id | default: product.id }}');\n  if (!container) return;\n\n  const jsonEl = container.querySelector('.ap-product-json');\n  let productData = {};\n  try { productData = JSON.parse(jsonEl.textContent); } catch(e) {}\n\n  const amountEl = container.querySelector('.ap-amount');\n\n  function formatMoneyFromCents(cents) {\n    // Force standard dollar format without \"A$\"\n    try {\n      return (cents/100).toLocaleString(undefined, { style: 'currency', currency: \"AUD\" }).replace(/^A\\$/, '$');\n    } catch(e) {\n      return '$' + (cents/100).toFixed(2);\n    }\n  }\n\n  function updateFromVariant(variant) {\n    if (!variant) return;\n    const perPaymentCents = Math.round(variant.price / 4);\n    amountEl.textContent = formatMoneyFromCents(perPaymentCents);\n  }\n\n  updateFromVariant(productData?.variants?.find(v => v.id === {{ _variant.id }} ) || productData?.variants?.[0]);\n\n  document.addEventListener('variant:change', function(e){\n    if (e.detail && e.detail.variant) updateFromVariant(e.detail.variant);\n  });\n  document.addEventListener('product:variant-change', function(e){\n    if (e.detail && e.detail.variant) updateFromVariant(e.detail.variant);\n  });\n\n  const select = container.closest('[data-section-id], section, form')?.querySelector('select[name=\"id\"]');\n  if (select) {\n    select.addEventListener('change', function() {\n      const vId = Number(this.value);\n      const v = productData.variants && productData.variants.find(vi => vi.id == vId);\n      updateFromVariant(v);\n    });\n  }\n})();\n</script>"
          }
        }
      }
    }
  }
}
